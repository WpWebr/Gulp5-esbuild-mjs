# Компонентная верстка — правила работы

Этот документ описывает **единый стандарт работы с компонентами верстки** в проекте.

Сборка основана на:
- **Gulp** — оркестрация задач
- **esbuild** — сборка JavaScript
- **SCSS** — стили
- **БЭМ** — методология именования
- **WordPress** — конечная интеграция

Документ обязателен к соблюдению всеми участниками команды.

---

## 1. Что такое компонент

**Компонент** — это независимый UI-блок, который:
- имеет собственный BEM-класс
- инкапсулирует HTML / SCSS / JS
- автоматически подключается сборкой

Примеры компонентов:
- `header`
- `hero`
- `card`
- `modal`
- `form-contact`

---

## 2. Структура компонента (обязательно)

Каждый компонент хранится в отдельной папке:

```
src/
└── html/
    └── components/
        └── component-name/
            ├── component-name.html
            ├── component-name.scss
            └── component-name.js   // опционально
```

### Важно
- имя папки = имя компонента = имя BEM-блока
- используется **только kebab-case**

---

## 3. Правила именования (БЭМ)

### Блок
```html
<div class="card"></div>
```

### Элемент
```html
<div class="card__title"></div>
```

### Модификатор
```html
<div class="card card--large"></div>
```

### Запрещено
- `id`
- вложенные блоки без необходимости
- глобальные классы

---

## 4. HTML компонента

```html
<section class="hero">
  <h1 class="hero__title">Title</h1>
  <p class="hero__text">Text</p>
</section>
```

### Правила
- только классы компонента
- никакой логики
- чистая разметка

---

## 5. SCSS компонента

```scss
.hero {
  padding: 40px;

  &__title {
    font-size: 32px;
  }

  &__text {
    margin-top: 16px;
  }
}
```

### Правила
- стили пишутся **только внутри блока**
- запрещены глобальные селекторы
- SCSS **НЕ импортируется вручную**

SCSS всех компонентов подключается автоматически генератором.

---

## 6. JS компонента (опционально)

Если компоненту требуется JS — создаётся файл:

```js
export default function initHero(root) {
  const button = root.querySelector('.hero__button');

  if (!button) return;

  button.addEventListener('click', () => {
    console.log('Hero click');
  });
}
```

### Обязательные правила
- один `export default`
- никакого `document.querySelector`
- работа **только через `root`**
- никаких сайд-эффектов при импорте

---

## 7. Авто-регистрация компонентов

Сборка автоматически:
- находит все компоненты
- подключает их SCSS
- регистрирует JS
- инициализирует JS **только если компонент есть в DOM**

Разработчику **ничего подключать вручную не нужно**.

---

## 8. Lazy-инициализация JS

JS компонентов инициализируется **при появлении в viewport**.

Преимущества:
- меньше нагрузки при старте страницы
- быстрее First Paint
- масштабируемость

---

## 9. Как добавить новый компонент

1. Создать папку:
```
src/html/components/card/
```

2. Создать файлы:
```
card.html
card.scss
card.js (если нужен)
```

3. Использовать компонент в HTML:
```html
<div class="card"></div>
```

4. Пересобрать проект

Готово ✅

---

## 10. Частые ошибки

❌ Импорт SCSS вручную
❌ Использование `id`
❌ Глобальные стили
❌ `document.querySelector`
❌ Несколько компонентов в одном JS-файле

---

## 11. Философия проекта

- компонент независим
- компонент переносим
- компонент не ломает другие части сайта

> **HTML — структура**  
> **SCSS — внешний вид**  
> **JS — поведение**

---

## 12. Резюме

- один компонент = одна папка
- имя компонента = BEM-блок
- SCSS и JS подключаются автоматически
- код читаемый и поддерживаемый

---



